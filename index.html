<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TEST VISI MALAM</title>
    <style>
        /* SETUP DASAR */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        html, body {
            width: 100%;
            height: 100%;
            background-color: #000;
            color: #555; /* Abu gelap */
            font-family: 'Courier New', monospace;
            overflow: hidden;
            touch-action: none;
        }

        /* LAYAR 1: HOOK (TEMA SURAM) */
        #start-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 10;
            text-align: center;
        }

        .title-glitch {
            font-size: 2rem;
            color: #333;
            text-shadow: 2px 0 #111;
            animation: flicker 3s infinite;
            letter-spacing: 5px;
            margin-bottom: 50px;
        }

        .btn-creepy {
            background: transparent;
            color: #444;
            border: 1px solid #222;
            padding: 15px 40px;
            font-size: 1rem;
            letter-spacing: 2px;
            cursor: pointer;
            transition: 0.2s;
            box-shadow: 0 0 5px #000;
        }

        .btn-creepy:active {
            background: #111;
            color: #fff;
            border-color: #555;
        }

        /* LAYAR 2: SCANNING (GLITCH MODE) */
        #scan-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 20;
        }

        .scan-line {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: rgba(255, 0, 0, 0.5);
            box-shadow: 0 0 20px red;
            opacity: 0.5;
            animation: scan-move 2s infinite linear;
        }

        @keyframes scan-move {
            0% { top: 0%; opacity: 0; }
            50% { opacity: 0.8; }
            100% { top: 100%; opacity: 0; }
        }

        .status-text {
            font-size: 1.5rem;
            color: #800; /* Merah Gelap */
            font-weight: bold;
            animation: text-shake 0.1s infinite;
        }

        /* LAYAR 3: THE NIGHTMARE (JEBRETAN) */
        #scare-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 999;
            overflow: hidden;
        }

        /* STROBE BACKGROUND */
        .strobe-bg {
            position: absolute;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, #330000 0%, #000 90%);
            animation: strobe 0.15s infinite;
        }

        /* HANTU SUPER SERAM */
        .the-monster {
            font-size: 120vw; /* SUPER BESAR */
            /* Rahasia kekejaman: Kontras tinggi + Invert bikin emoji jadi siluet tajam */
            filter: invert(1) contrast(400%) grayscale(100%) brightness(0.8);
            animation: shake-hell 0.05s infinite;
            position: relative;
            z-index: 2;
            transform-origin: center;
        }

        .warning-text {
            position: absolute;
            color: #fff;
            font-family: sans-serif;
            font-weight: 900;
            font-size: 3.5rem;
            text-transform: uppercase;
            text-align: center;
            z-index: 3;
            text-shadow: 0 0 20px red;
            animation: zoom-glitch 0.1s infinite;
        }

        /* ANIMASI */
        @keyframes flicker {
            0% { opacity: 0.1; }
            5% { opacity: 0.4; }
            10% { opacity: 0.1; }
            100% { opacity: 0.1; }
        }

        @keyframes text-shake {
            0% { transform: translate(1px, 1px) skewX(0deg); }
            25% { transform: translate(-1px, -2px) skewX(-10deg); }
            50% { transform: translate(2px, 0px) skewX(10deg); }
            75% { transform: translate(-1px, 1px) skewX(-5deg); }
            100% { transform: translate(0, 0) skewX(0deg); }
        }

        @keyframes shake-hell {
            0% { transform: translate(0, 0) scale(1.5) rotate(0deg); }
            25% { transform: translate(-30px, 30px) scale(1.5) rotate(-5deg); }
            50% { transform: translate(30px, -30px) scale(1.5) rotate(5deg); }
            75% { transform: translate(-30px, -30px) scale(1.5) rotate(-5deg); }
            100% { transform: translate(0, 0) scale(1.5) rotate(0deg); }
        }

        @keyframes strobe {
            0% { background: #000; }
            50% { background: #1a0000; } /* Merah Sangat Gelap */
            100% { background: #000; }
        }
    </style>
</head>
<body>

    <!-- LAYAR 1 -->
    <div id="start-screen">
        <div class="title-glitch">TEST VISI MALAM</div>
        <p style="color: #444; font-size: 0.8rem; margin-bottom: 30px;">JANGAN LAKUKAN INI DI TEMPAT GELAP</p>
        <button class="btn-creepy" onclick="startRitual()">MULAI</button>
    </div>

    <!-- LAYAR 2 -->
    <div id="scan-screen">
        <div class="scan-line"></div>
        <div class="status-text" id="status">MENGHUBUNGKAN...</div>
    </div>

    <!-- LAYAR 3 -->
    <div id="scare-screen">
        <div class="strobe-bg"></div>
        <div class="warning-text">JANGAN LIHAT BELAKANG!</div>
        <div class="the-monster">ðŸ‘»</div>
    </div>

    <script>
        const startScreen = document.getElementById('start-screen');
        const scanScreen = document.getElementById('scan-screen');
        const scareScreen = document.getElementById('scare-screen');
        const statusText = document.getElementById('status');

        // Anti Back
        history.pushState(null, null, location.href);
        window.onpopstate = function () { history.go(1); };

        function startRitual() {
            // Fullscreen force
            try {
                const elem = document.documentElement;
                if (elem.requestFullscreen) elem.requestFullscreen();
                else if (elem.webkitRequestFullscreen) elem.webkitRequestFullscreen();
            } catch(e) {}

            startScreen.style.display = 'none';
            scanScreen.style.display = 'flex';

            // Dengung Rendah (Horror Ambience)
            playDroneSound();

            // Alur Cerita Tegang
            setTimeout(() => { statusText.innerText = "DETEKSI GANGGUAN..."; }, 2000);
            setTimeout(() => { statusText.innerText = "ADA ORANG DIBELAKANGMU!"; statusText.style.color = "#f00"; }, 4000);
            
            // BOOM! (Random 5-7 detik)
            const randomDelay = 5000 + Math.random() * 2000;
            setTimeout(jumpScare, randomDelay);
        }

        function jumpScare() {
            scanScreen.style.display = 'none';
            scareScreen.style.display = 'flex';

            // Getar HP Sampe Lemes
            if (navigator.vibrate) {
                navigator.vibrate([100, 50, 100, 50, 200, 50, 500, 50, 1000]);
            }

            // Suara Ledakan Setan
            playDemonicScream();
        }

        // 1. SUARA DENGUNG (BIAR KETEGANGAN)
        function playDroneSound() {
            const AudioContext = window.AudioContext || window.webkitAudioContext;
            const ctx = new AudioContext();
            const t = ctx.currentTime;

            const osc = ctx.createOscillator();
            osc.type = 'sawtooth';
            osc.frequency.setValueAtTime(50, t); // Frekuensi rendah
            
            // Filter biar kayak suara dengung "ngem"
            const filter = ctx.createBiquadFilter();
            filter.type = 'lowpass';
            filter.frequency.value = 150;

            const gain = ctx.createGain();
            gain.gain.setValueAtTime(0.1, t); // Pelan tapi dalam
            gain.gain.linearRampToValueAtTime(0.2, t + 4); // Naik pelan

            osc.connect(filter);
            filter.connect(gain);
            gain.connect(ctx.destination);
            osc.start();
            
            // Simpan referensi biar bisa dimatiin pas jump scare (opsional, disini gue biarkan overlap biar kenceng)
        }

        // 2. SUARA TERIAKAN
        function playDemonicScream() {
            const AudioContext = window.AudioContext || window.webkitAudioContext;
            const ctx = new AudioContext();
            const t = ctx.currentTime;

            // LAYER 1: White Noise Kenceng
            const bufferSize = ctx.sampleRate * 2;
            const buffer = ctx.createBuffer(1, bufferSize, ctx.sampleRate);
            const data = buffer.getChannelData(0);
            for (let i = 0; i < bufferSize; i++) data[i] = Math.random() * 2 - 1;
            
            const noise = ctx.createBufferSource();
            noise.buffer = buffer;
            const noiseGain = ctx.createGain();
            noiseGain.gain.setValueAtTime(1.0, t); // FULL VOLUME!
            noiseGain.gain.exponentialRampToValueAtTime(0.01, t + 3);
            noise.connect(noiseGain);
            noiseGain.connect(ctx.destination);
            noise.start();

            // LAYER 2: Scream High Pitch
            const osc = ctx.createOscillator();
            osc.type = 'sawtooth';
            osc.frequency.setValueAtTime(800, t); // Mulai tinggi
            osc.frequency.exponentialRampToValueAtTime(100, t + 0.1); // Drop
            
            const oscGain = ctx.createGain();
            oscGain.gain.setValueAtTime(0.8, t);
            oscGain.gain.linearRampToValueAtTime(0, t + 2.5);

            osc.connect(oscGain);
            oscGain.connect(ctx.destination);
            osc.start();
        }
    </script>
</body>
</html>
